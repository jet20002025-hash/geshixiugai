# 调试预设模板选择问题

## 🔍 需要的信息

为了帮你排查"使用预设模板选择不了"的问题，请提供以下信息：

---

## 1. 浏览器控制台错误信息

**步骤**：
1. 按 `F12` 打开开发者工具
2. 切换到 **Console（控制台）** 标签
3. 刷新页面
4. 查看是否有红色错误信息

**请告诉我**：
- 是否有错误信息？
- 如果有，具体的错误内容是什么？

---

## 2. 网络请求状态

**步骤**：
1. 按 `F12` 打开开发者工具
2. 切换到 **Network（网络）** 标签
3. 刷新页面
4. 找到 `/templates/presets` 这个请求
5. 点击查看详情

**请告诉我**：
- 请求状态码是多少？（200、404、500等）
- 响应内容是什么？

**或者**，在控制台执行以下命令：

```javascript
fetch('/templates/presets')
  .then(r => {
    console.log('状态码:', r.status);
    return r.json();
  })
  .then(data => {
    console.log('返回数据:', data);
  })
  .catch(err => {
    console.error('错误:', err);
  });
```

---

## 3. 下拉框显示情况

**请告诉我**：
- 选择"使用预设模板"后，是否能看到"选择您的大学"下拉框？
- 下拉框中显示什么内容？
  - "加载中..."（一直显示）
  - "加载失败"
  - "请选择您的大学"（但没有选项）
  - 有大学列表但无法选择

---

## 4. 服务器日志

**在服务器上执行**：

```bash
# 查看服务日志
sudo journalctl -u geshixiugai -n 50 --no-pager | grep -i "template\|preset\|university"
```

**请告诉我**：
- 是否有相关错误信息？

---

## 5. 检查文件是否存在

**在服务器上执行**：

```bash
# 检查配置文件是否存在
ls -la /var/www/geshixiugai/backend/app/services/university_templates.json

# 检查文件内容
head -20 /var/www/geshixiugai/backend/app/services/university_templates.json
```

**请告诉我**：
- 文件是否存在？
- 文件内容是否正确？

---

## 6. 测试API端点

**在服务器上执行**：

```bash
# 测试API端点（需要先进入项目目录）
cd /var/www/geshixiugai
curl http://localhost:8000/templates/presets
```

**或者**在浏览器中直接访问：
```
https://geshixiugai.cn/templates/presets
```

**请告诉我**：
- 返回什么内容？

---

## 📋 快速检查清单

请按顺序检查：

- [ ] 浏览器控制台是否有错误？
- [ ] `/templates/presets` API 是否返回数据？
- [ ] 下拉框是否显示？
- [ ] 服务器日志是否有错误？
- [ ] `university_templates.json` 文件是否存在？

---

## 🔧 常见问题

### Q1: 下拉框显示"加载中..."一直不变

**可能原因**：
- API请求失败
- 服务器未响应

**解决方法**：
1. 检查浏览器控制台的网络请求
2. 检查服务器是否正常运行
3. 检查API路由是否正确注册

### Q2: 下拉框显示"加载失败"

**可能原因**：
- API返回错误
- 文件不存在或格式错误

**解决方法**：
1. 检查服务器日志
2. 检查 `university_templates.json` 文件是否存在
3. 检查文件格式是否正确（JSON格式）

### Q3: 有大学列表但无法选择

**可能原因**：
- JavaScript事件绑定问题
- 表单验证问题

**解决方法**：
1. 检查浏览器控制台是否有JavaScript错误
2. 检查表单提交逻辑

---

## 📝 请提供的信息总结

为了快速定位问题，请提供：

1. **浏览器控制台错误**（如果有）
2. **网络请求状态**（`/templates/presets` 的状态码和响应）
3. **下拉框显示内容**
4. **服务器日志**（相关错误信息）
5. **文件是否存在**（`university_templates.json`）

有了这些信息，我就能快速帮你解决问题！🔍









