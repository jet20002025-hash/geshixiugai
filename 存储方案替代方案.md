# 存储方案替代方案

由于无法使用 Cloudflare R2，这里提供多个替代存储方案。

---

## 🎯 推荐方案（按优先级排序）

### 方案 1：Supabase Storage ⭐⭐⭐⭐⭐（最推荐）

**优点**：
- ✅ **免费额度充足**：1 GB 存储，2 GB 流量/月
- ✅ **国内可访问**（相对稳定）
- ✅ **简单易用**，API 友好
- ✅ **不需要信用卡**
- ✅ **与 Vercel 集成良好**

**缺点**：
- ⚠️ 免费额度有限（但足够个人项目使用）

**注册步骤**：
1. 访问：https://supabase.com
2. 点击 "Start your project"
3. 使用 GitHub 账号登录（推荐）
4. 创建新项目
5. 在左侧菜单找到 **"Storage"**
6. 创建 Bucket：`word-formatter-storage`
7. 获取 API Key：
   - Settings → API → `anon public` key 和 `service_role` key

**配置环境变量**：
```
SUPABASE_URL=https://你的项目ID.supabase.co
SUPABASE_KEY=你的service_role key（用于服务端）
SUPABASE_BUCKET=word-formatter-storage
```

---

### 方案 2：Backblaze B2 ⭐⭐⭐⭐

**优点**：
- ✅ **免费额度**：10 GB 存储，1 GB 下载/天
- ✅ **不需要信用卡**
- ✅ **S3 兼容 API**（代码改动最小）
- ✅ **全球可访问**

**缺点**：
- ⚠️ 国内访问可能较慢

**注册步骤**：
1. 访问：https://www.backblaze.com/b2/sign-up.html
2. 注册账号（只需要邮箱）
3. 创建 Bucket：`word-formatter-storage`
4. 创建 Application Key：
   - B2 → App Keys → Add a New Application Key
   - 权限：Read and Write
   - 保存 `keyID` 和 `applicationKey`

**配置环境变量**：
```
B2_ACCOUNT_ID=你的Account ID
B2_APPLICATION_KEY=你的Application Key
B2_BUCKET_NAME=word-formatter-storage
B2_ENDPOINT=https://s3.us-west-000.backblazeb2.com（根据你的区域选择）
```

---

### 方案 3：Vercel Blob Storage ⭐⭐⭐⭐

**优点**：
- ✅ **与 Vercel 完美集成**
- ✅ **简单易用**
- ✅ **全球 CDN**

**缺点**：
- ❌ **需要 Vercel Pro**（$20/月）
- ⚠️ 免费版不可用

**适用场景**：
- 如果你愿意升级到 Vercel Pro

**配置步骤**：
1. 在 Vercel Dashboard → Storage → Blob
2. 创建 Blob Store
3. 获取 `BLOB_READ_WRITE_TOKEN`
4. 配置环境变量：
```
BLOB_READ_WRITE_TOKEN=你的token
```

---

### 方案 4：七牛云 ⭐⭐⭐

**优点**：
- ✅ **国内服务**，访问速度快
- ✅ **免费额度**：10 GB 存储，10 GB 流量/月
- ✅ **S3 兼容 API**

**缺点**：
- ⚠️ 需要实名认证
- ⚠️ 可能需要备案（如果使用自定义域名）

**注册步骤**：
1. 访问：https://www.qiniu.com
2. 注册账号并完成实名认证
3. 创建对象存储空间：`word-formatter-storage`
4. 获取 AccessKey 和 SecretKey：
   - 个人中心 → 密钥管理

**配置环境变量**：
```
QINIU_ACCESS_KEY=你的AccessKey
QINIU_SECRET_KEY=你的SecretKey
QINIU_BUCKET=word-formatter-storage
QINIU_ENDPOINT=https://s3-cn-east-1.qiniucs.com（根据你的区域选择）
```

---

### 方案 5：阿里云 OSS ⭐⭐⭐

**优点**：
- ✅ **国内服务**，访问速度快
- ✅ **稳定可靠**

**缺点**：
- ❌ **需要实名认证**
- ❌ **需要备案**（如果使用自定义域名）
- ⚠️ 免费额度较少

**适用场景**：
- 如果你已有阿里云账号

---

## 🔧 代码实现

我已经创建了通用的存储接口，可以轻松切换不同的存储后端。

### 当前支持的存储后端

1. **R2Storage**（Cloudflare R2）- 已实现
2. **SupabaseStorage** - 需要实现
3. **B2Storage**（Backblaze B2）- 需要实现
4. **QiniuStorage**（七牛云）- 需要实现

### 存储接口设计

所有存储后端都实现相同的接口：
- `upload_file(key, file_obj)` - 上传文件
- `download_file(key)` - 下载文件
- `file_exists(key)` - 检查文件是否存在
- `delete_file(key)` - 删除文件
- `is_available()` - 检查存储是否可用

---

## 📋 快速选择指南

### 如果你想要：
- **最简单** → 选择 **Supabase Storage**
- **最大免费额度** → 选择 **Backblaze B2**
- **国内访问最快** → 选择 **七牛云**（需要实名）
- **与 Vercel 集成最好** → 选择 **Vercel Blob**（需要付费）

---

## 🚀 下一步

**告诉我你选择哪个方案，我会：**
1. 实现对应的存储后端
2. 修改代码使用新的存储
3. 提供详细的配置步骤
4. 测试部署

---

## 💡 建议

**推荐顺序**：
1. **Supabase Storage** - 最简单，免费额度足够
2. **Backblaze B2** - 免费额度最大，S3兼容
3. **七牛云** - 如果国内访问是主要需求

**如果你不确定，我建议先试试 Supabase Storage，它最简单！**

