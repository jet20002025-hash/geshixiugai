# Cloudflare R2 å­˜å‚¨é…ç½®æ­¥éª¤

## ğŸ“‹ æ­¥éª¤ 1ï¼šåˆ›å»º Cloudflare R2 Bucket

### 1.1 ç™»å½• Cloudflare Dashboard

1. è®¿é—®ï¼šhttps://dash.cloudflare.com
2. ä½¿ç”¨ä½ çš„è´¦å·ç™»å½•

### 1.2 åˆ›å»º R2 Bucket

1. åœ¨å·¦ä¾§èœå•æ‰¾åˆ° **"R2"**ï¼Œç‚¹å‡»è¿›å…¥
2. å¦‚æœç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œå¯èƒ½éœ€è¦ï¼š
   - ç‚¹å‡» "Get started" æˆ– "Enable R2"
   - é˜…è¯»å¹¶åŒæ„æœåŠ¡æ¡æ¬¾
3. ç‚¹å‡» **"Create bucket"** æŒ‰é’®
4. å¡«å†™ä¿¡æ¯ï¼š
   - **Bucket name**ï¼š`word-formatter-storage`
   - **Location**ï¼šé€‰æ‹©ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸï¼ˆå¦‚ `APAC` æˆ– `WNAM`ï¼‰
5. ç‚¹å‡» **"Create bucket"**

---

## ğŸ“‹ æ­¥éª¤ 2ï¼šåˆ›å»º API Token

### 2.1 è¿›å…¥ API Tokens é¡µé¢

1. åœ¨ R2 é¡µé¢ï¼Œç‚¹å‡» **"Manage R2 API Tokens"**
2. æˆ–è®¿é—®ï¼šhttps://dash.cloudflare.com/profile/api-tokens

### 2.2 åˆ›å»º API Token

1. ç‚¹å‡» **"Create API Token"**
2. é€‰æ‹© **"Custom token"**
3. å¡«å†™ä¿¡æ¯ï¼š
   - **Token name**ï¼š`word-formatter-r2-token`
   - **Permissions**ï¼š
     - **Account** â†’ **Cloudflare R2** â†’ **Edit**
   - **Account Resources**ï¼š
     - **Include** â†’ é€‰æ‹©ä½ çš„è´¦å·
   - **Zone Resources**ï¼šä¸éœ€è¦è®¾ç½®
4. ç‚¹å‡» **"Continue to summary"**
5. æ£€æŸ¥é…ç½®ï¼Œç‚¹å‡» **"Create Token"**

### 2.3 ä¿å­˜ Token ä¿¡æ¯

**é‡è¦**ï¼šToken ä¿¡æ¯åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·ç«‹å³å¤åˆ¶ä¿å­˜ï¼

ä½ ä¼šçœ‹åˆ°ï¼š
- **Access Key ID**ï¼šç±»ä¼¼ `a1b2c3d4e5f6g7h8i9j0`
- **Secret Access Key**ï¼šç±»ä¼¼ `AbCdEfGhIjKlMnOpQrStUvWxYz1234567890`
- **Account ID**ï¼šåœ¨ R2 é¡µé¢é¡¶éƒ¨å¯ä»¥çœ‹åˆ°

**ç«‹å³å¤åˆ¶ä¿å­˜è¿™äº›ä¿¡æ¯ï¼**

---

## ğŸ“‹ æ­¥éª¤ 3ï¼šåœ¨ Vercel é…ç½®ç¯å¢ƒå˜é‡

### 3.1 è¿›å…¥ Vercel é¡¹ç›®è®¾ç½®

1. ç™»å½• Vercel Dashboardï¼šhttps://vercel.com/dashboard
2. é€‰æ‹©ä½ çš„é¡¹ç›®ï¼š`geshixiugai`
3. ç‚¹å‡» **Settings** â†’ **Environment Variables**

### 3.2 æ·»åŠ ç¯å¢ƒå˜é‡

ä¾æ¬¡æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

#### å˜é‡ 1ï¼šR2_ACCOUNT_ID
- **Key**ï¼š`R2_ACCOUNT_ID`
- **Value**ï¼šä½ çš„ Account IDï¼ˆåœ¨ R2 é¡µé¢é¡¶éƒ¨å¯ä»¥çœ‹åˆ°ï¼‰
- **Environment**ï¼šé€‰æ‹© **All Environments**ï¼ˆProduction, Preview, Developmentï¼‰
- ç‚¹å‡» **Save**

#### å˜é‡ 2ï¼šR2_ACCESS_KEY_ID
- **Key**ï¼š`R2_ACCESS_KEY_ID`
- **Value**ï¼šä½ çš„ Access Key IDï¼ˆä» API Token åˆ›å»ºé¡µé¢å¤åˆ¶ï¼‰
- **Environment**ï¼šé€‰æ‹© **All Environments**
- ç‚¹å‡» **Save**

#### å˜é‡ 3ï¼šR2_SECRET_ACCESS_KEY
- **Key**ï¼š`R2_SECRET_ACCESS_KEY`
- **Value**ï¼šä½ çš„ Secret Access Keyï¼ˆä» API Token åˆ›å»ºé¡µé¢å¤åˆ¶ï¼‰
- **Environment**ï¼šé€‰æ‹© **All Environments**
- ç‚¹å‡» **Save**

#### å˜é‡ 4ï¼šR2_BUCKET_NAME
- **Key**ï¼š`R2_BUCKET_NAME`
- **Value**ï¼š`word-formatter-storage`
- **Environment**ï¼šé€‰æ‹© **All Environments**
- ç‚¹å‡» **Save**

---

## ğŸ“‹ æ­¥éª¤ 4ï¼šéªŒè¯é…ç½®

é…ç½®å®Œæˆåï¼Œç­‰å¾… Vercel é‡æ–°éƒ¨ç½²ï¼ˆä¼šè‡ªåŠ¨è§¦å‘ï¼‰ã€‚

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®è°ƒè¯•ç«¯ç‚¹æ£€æŸ¥é…ç½®ï¼š

```
https://geshixiugai.org/payments/debug/config
```

åº”è¯¥èƒ½çœ‹åˆ° R2 ç›¸å…³çš„é…ç½®ä¿¡æ¯ã€‚

---

## âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] R2 Bucket å·²åˆ›å»ºï¼ˆ`word-formatter-storage`ï¼‰
- [ ] API Token å·²åˆ›å»º
- [ ] Account ID å·²ä¿å­˜
- [ ] Access Key ID å·²ä¿å­˜
- [ ] Secret Access Key å·²ä¿å­˜
- [ ] Vercel ç¯å¢ƒå˜é‡å·²é…ç½®ï¼ˆ4 ä¸ªå˜é‡ï¼‰
- [ ] Vercel å·²é‡æ–°éƒ¨ç½²
- [ ] è°ƒè¯•ç«¯ç‚¹æ˜¾ç¤ºé…ç½®æ­£ç¡®

---

## ğŸ¯ ä¸‹ä¸€æ­¥

é…ç½®å®Œæˆåï¼Œå‘Šè¯‰æˆ‘ï¼š
1. âœ… å·²å®Œæˆé…ç½®
2. æˆ– âŒ é‡åˆ°é—®é¢˜ï¼ˆå‘Šè¯‰æˆ‘å…·ä½“é—®é¢˜ï¼‰

ç„¶åæˆ‘ä¼šï¼š
1. ä¿®æ”¹ä»£ç ä½¿ç”¨ R2 å­˜å‚¨
2. æµ‹è¯•éƒ¨ç½²
3. éªŒè¯åŠŸèƒ½

**å¼€å§‹é…ç½®å§ï¼å®Œæˆåå‘Šè¯‰æˆ‘ï¼**

