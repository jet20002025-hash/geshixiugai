# 完成部署最后三步

## 📋 需要完成的三步

1. SSL 证书配置
2. HTTPS 访问测试
3. 在网站底部添加备案号

---

## 步骤 1：配置 SSL 证书

### 在服务器上执行（阿里云控制台的对话框里）

```bash
# 1. 安装 Certbot
sudo dnf install -y certbot python3-certbot-nginx

# 2. 申请 SSL 证书
sudo certbot --nginx -d geshixiugai.cn -d www.geshixiugai.cn
```

### 按照提示操作

1. **输入邮箱地址**：
   - 输入你的邮箱（用于证书到期提醒）
   - 按回车

2. **同意服务条款**：
   - 输入 `Y` 然后按回车

3. **是否接收邮件通知**：
   - 可选，输入 `Y` 或 `N` 然后按回车

4. **等待验证完成**：
   - Certbot 会自动验证域名并申请证书
   - 通常几秒钟完成

### 预期结果

如果成功，会看到类似：
```
Congratulations! You have successfully enabled https://geshixiugai.cn
```

---

## 步骤 2：HTTPS 访问测试

### 在浏览器中测试

1. **访问 HTTPS 地址**：
   - `https://geshixiugai.cn`
   - `https://www.geshixiugai.cn`

2. **检查证书**：
   - 应该看到绿色锁图标 🔒
   - 地址栏显示 `https://`
   - 点击锁图标可以查看证书详情

3. **测试 HTTP 重定向**：
   - 访问 `http://geshixiugai.cn`
   - 应该自动跳转到 `https://geshixiugai.cn`

### 在服务器上测试（可选）

```bash
# 测试 HTTPS 访问
curl -I https://geshixiugai.cn

# 应该看到 HTTP/2 200 或类似响应
```

---

## 步骤 3：在网站底部添加备案号

### 编辑前端文件

在服务器上执行（阿里云控制台的对话框里）：

```bash
# 1. 进入项目目录
cd /var/www/geshixiugai

# 2. 编辑前端文件
vi frontend/index.html
```

### 在 vi 编辑器中

1. **找到页面底部**：
   - 按 `G` 跳转到文件末尾
   - 或使用方向键向下滚动

2. **添加备案号**：
   - 按 `i` 进入编辑模式
   - 在 `</body>` 标签之前添加：

```html
<footer style="text-align: center; padding: 20px; color: #666; font-size: 12px; border-top: 1px solid #eee; margin-top: 40px;">
    <p>备案号：你的备案号</p>
    <p>例如：京ICP备12345678号-1</p>
</footer>
```

3. **保存退出**：
   - 按 `Esc` 退出编辑模式
   - 输入 `:wq` 然后按回车保存退出

### 如果不知道备案号格式

备案号格式通常是：
- `京ICP备12345678号-1`（北京）
- `沪ICP备12345678号-1`（上海）
- `粤ICP备12345678号-1`（广东）
- `浙ICP备12345678号-1`（浙江）

**替换为你的实际备案号**。

### 重启服务使更改生效

```bash
# 重启服务
sudo systemctl restart geshixiugai

# 检查服务状态
sudo systemctl status geshixiugai
```

---

## 📋 完整操作流程

### 步骤 1：配置 SSL（在服务器上）

```bash
sudo dnf install -y certbot python3-certbot-nginx
sudo certbot --nginx -d geshixiugai.cn -d www.geshixiugai.cn
```

### 步骤 2：测试 HTTPS（在浏览器中）

- 访问 `https://geshixiugai.cn`
- 检查绿色锁图标
- 测试 HTTP 自动跳转

### 步骤 3：添加备案号（在服务器上）

```bash
cd /var/www/geshixiugai
vi frontend/index.html
# 添加备案号，保存退出
sudo systemctl restart geshixiugai
```

---

## ✅ 完成检查清单

- [ ] SSL 证书已配置
- [ ] HTTPS 可以正常访问
- [ ] HTTP 自动跳转到 HTTPS
- [ ] 网站底部已添加备案号
- [ ] 备案号显示正确

---

## 🎉 完成！

完成这三步后，你的网站就完全部署好了！

**访问地址**：
- HTTPS：https://geshixiugai.cn
- HTTP：http://geshixiugai.cn（自动跳转到 HTTPS）

---

**现在开始执行这三步！** 🚀


