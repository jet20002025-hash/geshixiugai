# 查看检测日志的正确命令

## ❌ 错误命令

```bash
sudo tail -n 50 /var/log/geshixiugai/error.log   sudo grep "\[检测\]" /var/log/geshixiugai/error.log | tail -n 50
```

**问题：** 两个命令放在一行，导致 `tail` 把后面的内容当作文件名。

---

## ✅ 正确命令

### 方法1：分别执行两个命令

```bash
# 先查看所有日志（最后50行）
sudo tail -n 50 /var/log/geshixiugai/error.log

# 然后查看检测信息
sudo grep "\[检测\]" /var/log/geshixiugai/error.log | tail -n 50
```

### 方法2：使用管道（推荐）

```bash
# 先查看所有日志，然后筛选检测信息
sudo tail -n 100 /var/log/geshixiugai/error.log | grep "\[检测\]"
```

### 方法3：查看修复信息

```bash
# 查看修复信息
sudo grep "\[修复\]" /var/log/geshixiugai/error.log | tail -n 50
```

### 方法4：查看所有相关信息

```bash
# 查看检测和修复信息
sudo grep -E "\[检测\]|\[修复\]" /var/log/geshixiugai/error.log | tail -n 50
```

---

## 📋 快速命令汇总

```bash
# 1. 查看所有日志（最后50行）
sudo tail -n 50 /var/log/geshixiugai/error.log

# 2. 查看检测信息
sudo grep "\[检测\]" /var/log/geshixiugai/error.log | tail -n 50

# 3. 查看修复信息
sudo grep "\[修复\]" /var/log/geshixiugai/error.log | tail -n 50

# 4. 查看诊断信息
sudo grep "\[诊断\]" /var/log/geshixiugai/error.log | tail -n 50

# 5. 查看所有相关信息
sudo grep -E "\[检测\]|\[修复\]|\[诊断\]" /var/log/geshixiugai/error.log | tail -n 50
```

---

## 🔍 如果没有检测日志

如果没有看到检测日志，可能的原因：

1. **代码还没有更新**
   ```bash
   cd /var/www/geshixiugai
   git pull origin main
   ```

2. **服务还没有重启**
   ```bash
   sudo systemctl restart geshixiugai
   ```

3. **还没有处理过文档**
   - 需要上传一个包含"诚信承诺"和"摘要"的文档进行测试

4. **检测代码没有执行**
   - 检查是否有其他错误导致流程中断

---

## 📊 预期的日志输出

如果一切正常，应该看到类似以下输出：

```
[修复] 诚信承诺范围: X 到 Y
[修复] 摘要起始位置: Z
[修复] ⚠️ 诚信承诺和摘要之间没有分页符，强制添加分页符
[修复] 方法1：已设置摘要标题段落的 page_break_before = True
[修复] 方法2：已在摘要标题前插入空白段落并设置分页符
[修复] 方法3：已在摘要标题的第一个run前添加分页符
[修复] ✅ 已使用多种方法强制添加分页符，确保诚信承诺和摘要分开

[检测] ========== 修复后检测：诚信承诺和摘要分页结果 ==========
[检测] ✅ 修复成功：诚信承诺和摘要已分开在不同页
[检测] 分页符位置: 1 个

[检测] ========== PDF生成后检测：诚信承诺和摘要分页结果 ==========
[检测] PDF总页数: 50
[检测] 第 2 页包含诚信承诺
[检测] 第 3 页包含摘要
[检测] ✅ PDF中诚信承诺和摘要分开在不同页
```

