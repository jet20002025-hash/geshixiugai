# Cloudflare R2 é…ç½®æ¸…å•

## âœ… å·²è·å–çš„ä¿¡æ¯

æ ¹æ®ä½ åˆšæ‰åˆ›å»ºçš„ API Tokenï¼Œä»¥ä¸‹æ˜¯æ‰€æœ‰éœ€è¦çš„ä¿¡æ¯ï¼š

### ğŸ“‹ é…ç½®ä¿¡æ¯æ±‡æ€»

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| **Account ID** | `5003936d05d7bc23217a0fdef979a238` | ä» Endpoint URL æå– |
| **Access Key ID** | `f663cb46e66524d71351020dada457e1` | S3 å®¢æˆ·ç«¯å‡­æ® |
| **Secret Access Key** | `a56af737607a72d8dc77630a9bd476acdc9ca2e07b752f39bda00d137d8f94f7` | S3 å®¢æˆ·ç«¯å‡­æ® |
| **Endpoint URL** | `https://5003936d05d7bc23217a0fdef979a238.r2.cloudflarestorage.com` | S3 ç«¯ç‚¹ |
| **Bucket Name** | `word-formatter-storage` | éœ€è¦ç¡®è®¤ï¼ˆå¦‚æœå·²åˆ›å»ºï¼‰ |

---

## ğŸ“‹ æ­¥éª¤ 1ï¼šç¡®è®¤ R2 Bucket å·²åˆ›å»º

### æ£€æŸ¥ Bucket æ˜¯å¦å­˜åœ¨

1. ç™»å½• Cloudflare Dashboardï¼šhttps://dash.cloudflare.com
2. è¿›å…¥ **R2** é¡µé¢
3. æ£€æŸ¥æ˜¯å¦æœ‰åä¸º `word-formatter-storage` çš„å­˜å‚¨æ¡¶

### å¦‚æœ Bucket ä¸å­˜åœ¨ï¼Œåˆ›å»ºå®ƒï¼š

1. ç‚¹å‡» **"Create bucket"** æˆ– **"+ åˆ›å»ºå­˜å‚¨æ¡¶"**
2. å¡«å†™ä¿¡æ¯ï¼š
   - **Bucket name**ï¼š`word-formatter-storage`
   - **Location**ï¼šé€‰æ‹©ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸï¼ˆå¦‚ `APAC` æˆ– `WNAM`ï¼‰
3. ç‚¹å‡» **"Create bucket"**

---

## ğŸ“‹ æ­¥éª¤ 2ï¼šåœ¨ Vercel é…ç½®ç¯å¢ƒå˜é‡

### 2.1 è¿›å…¥ Vercel é¡¹ç›®è®¾ç½®

1. ç™»å½• Vercel Dashboardï¼šhttps://vercel.com/dashboard
2. é€‰æ‹©ä½ çš„é¡¹ç›®ï¼š`geshixiugai`
3. ç‚¹å‡» **Settings** â†’ **Environment Variables**

### 2.2 æ·»åŠ ç¯å¢ƒå˜é‡

ä¾æ¬¡æ·»åŠ ä»¥ä¸‹ **5 ä¸ª**ç¯å¢ƒå˜é‡ï¼š

#### âœ… å˜é‡ 1ï¼šR2_ACCOUNT_ID

```
Key: R2_ACCOUNT_ID
Value: 5003936d05d7bc23217a0fdef979a238
Environment: All Environments (Production, Preview, Development)
```

ç‚¹å‡» **Save**

---

#### âœ… å˜é‡ 2ï¼šR2_ACCESS_KEY_ID

```
Key: R2_ACCESS_KEY_ID
Value: f663cb46e66524d71351020dada457e1
Environment: All Environments
```

ç‚¹å‡» **Save**

---

#### âœ… å˜é‡ 3ï¼šR2_SECRET_ACCESS_KEY

```
Key: R2_SECRET_ACCESS_KEY
Value: a56af737607a72d8dc77630a9bd476acdc9ca2e07b752f39bda00d137d8f94f7
Environment: All Environments
```

ç‚¹å‡» **Save**

---

#### âœ… å˜é‡ 4ï¼šR2_ENDPOINT

```
Key: R2_ENDPOINT
Value: https://5003936d05d7bc23217a0fdef979a238.r2.cloudflarestorage.com
Environment: All Environments
```

ç‚¹å‡» **Save**

---

#### âœ… å˜é‡ 5ï¼šR2_BUCKET_NAME

```
Key: R2_BUCKET_NAME
Value: word-formatter-storage
Environment: All Environments
```

ç‚¹å‡» **Save**

---

## ğŸ“‹ æ­¥éª¤ 3ï¼šé‡æ–°éƒ¨ç½²

é…ç½®å®Œç¯å¢ƒå˜é‡åï¼ŒVercel ä¼šè‡ªåŠ¨è§¦å‘é‡æ–°éƒ¨ç½²ã€‚

### æ‰‹åŠ¨é‡æ–°éƒ¨ç½²ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š

1. åœ¨ Vercel Dashboard â†’ **Deployments**
2. ç‚¹å‡»æœ€æ–°éƒ¨ç½²å³ä¾§çš„ **"..."** â†’ **"Redeploy"**
3. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦ 1-2 åˆ†é’Ÿï¼‰

---

## âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

å®Œæˆé…ç½®åï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š

### 1. R2 å­˜å‚¨æ¡¶
- [ ] åœ¨ Cloudflare R2 é¡µé¢èƒ½çœ‹åˆ° `word-formatter-storage` å­˜å‚¨æ¡¶
- [ ] å­˜å‚¨æ¡¶çŠ¶æ€ä¸º "Active"

### 2. Vercel ç¯å¢ƒå˜é‡ï¼ˆ5 ä¸ªï¼‰
- [ ] `R2_ACCOUNT_ID` = `5003936d05d7bc23217a0fdef979a238`
- [ ] `R2_ACCESS_KEY_ID` = `f663cb46e66524d71351020dada457e1`
- [ ] `R2_SECRET_ACCESS_KEY` = `a56af737607a72d8dc77630a9bd476acdc9ca2e07b752f39bda00d137d8f94f7`
- [ ] `R2_ENDPOINT` = `https://5003936d05d7bc23217a0fdef979a238.r2.cloudflarestorage.com`
- [ ] `R2_BUCKET_NAME` = `word-formatter-storage`
- [ ] æ‰€æœ‰å˜é‡éƒ½é€‰æ‹©äº† **"All Environments"**

### 3. éƒ¨ç½²çŠ¶æ€
- [ ] Vercel éƒ¨ç½²å·²å®Œæˆ
- [ ] éƒ¨ç½²æ—¥å¿—ä¸­æ²¡æœ‰é”™è¯¯

---

## ğŸ§ª éªŒè¯é…ç½®

### æ–¹æ³• 1ï¼šè®¿é—®è°ƒè¯•ç«¯ç‚¹

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ï¼š

```
https://geshixiugai.org/payments/debug/config
```

åº”è¯¥èƒ½çœ‹åˆ° R2 ç›¸å…³çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- `R2_ACCOUNT_ID`
- `R2_ACCESS_KEY_ID`ï¼ˆå¯èƒ½æ˜¾ç¤ºä¸º `***` éšè—ï¼‰
- `R2_ENDPOINT`
- `R2_BUCKET_NAME`
- å­˜å‚¨ç±»å‹ï¼š`Cloudflare R2 Storage`

### æ–¹æ³• 2ï¼šæµ‹è¯•æ–‡ä»¶ä¸Šä¼ 

1. è®¿é—®ä½ çš„ç½‘ç«™ï¼šhttps://geshixiugai.org
2. ä¸Šä¼ ä¸€ä¸ªæµ‹è¯•æ–‡æ¡£
3. æ£€æŸ¥æ˜¯å¦æˆåŠŸï¼š
   - ä¸å†å‡ºç°"æ–‡æ¡£ä¸å­˜åœ¨"é”™è¯¯
   - åœ¨ Cloudflare R2 Dashboard â†’ `word-formatter-storage` ä¸­èƒ½çœ‹åˆ°ä¸Šä¼ çš„æ–‡ä»¶

---

## âš ï¸ é‡è¦æç¤º

1. **å‡­æ®å®‰å…¨**ï¼š
   - è¿™äº›å‡­æ®åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·å¦¥å–„ä¿å­˜
   - ä¸è¦å°†å‡­æ®æäº¤åˆ° Git ä»“åº“
   - å¦‚æœå‡­æ®æ³„éœ²ï¼Œç«‹å³åœ¨ Cloudflare ä¸­åˆ é™¤å¹¶é‡æ–°åˆ›å»º

2. **ç¯å¢ƒå˜é‡**ï¼š
   - ç¡®ä¿æ‰€æœ‰å˜é‡éƒ½é€‰æ‹©äº† **"All Environments"**
   - é…ç½®åéœ€è¦é‡æ–°éƒ¨ç½²æ‰èƒ½ç”Ÿæ•ˆ

3. **Bucket åç§°**ï¼š
   - ç¡®ä¿ Vercel ä¸­çš„ `R2_BUCKET_NAME` ä¸ Cloudflare ä¸­åˆ›å»ºçš„å­˜å‚¨æ¡¶åç§°å®Œå…¨ä¸€è‡´
   - é»˜è®¤ä½¿ç”¨ï¼š`word-formatter-storage`

---

## ğŸ¯ ä¸‹ä¸€æ­¥

å®Œæˆé…ç½®åï¼š

1. âœ… **å‘Šè¯‰æˆ‘å·²å®Œæˆé…ç½®**ï¼Œæˆ‘ä¼šå¸®ä½ éªŒè¯
2. âŒ **å¦‚æœé‡åˆ°é—®é¢˜**ï¼Œå‘Šè¯‰æˆ‘å…·ä½“çš„é”™è¯¯ä¿¡æ¯

---

## ğŸ“ å¿«é€Ÿå‚è€ƒ

### ç¯å¢ƒå˜é‡å¿«é€Ÿå¤åˆ¶

```bash
# åœ¨ Vercel Dashboard â†’ Settings â†’ Environment Variables ä¸­æ·»åŠ ï¼š

R2_ACCOUNT_ID=5003936d05d7bc23217a0fdef979a238
R2_ACCESS_KEY_ID=f663cb46e66524d71351020dada457e1
R2_SECRET_ACCESS_KEY=a56af737607a72d8dc77630a9bd476acdc9ca2e07b752f39bda00d137d8f94f7
R2_ENDPOINT=https://5003936d05d7bc23217a0fdef979a238.r2.cloudflarestorage.com
R2_BUCKET_NAME=word-formatter-storage
```

---

**å¼€å§‹é…ç½®å§ï¼å®Œæˆåå‘Šè¯‰æˆ‘ï¼** ğŸš€

