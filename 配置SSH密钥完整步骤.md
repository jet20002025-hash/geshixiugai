# é…ç½® SSH å¯†é’¥å®Œæ•´æ­¥éª¤

## ğŸ” å½“å‰çŠ¶æ€

- âœ… SSH è¿æ¥å·²å»ºç«‹ï¼ˆå·²æ·»åŠ åˆ° known_hostsï¼‰
- âŒ è¿˜æ²¡æœ‰é…ç½® SSH å¯†é’¥ï¼ˆPermission deniedï¼‰

---

## ğŸ”§ è§£å†³æ­¥éª¤

### æ­¥éª¤ 1ï¼šç”Ÿæˆ SSH å¯†é’¥

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# ç”Ÿæˆ SSH å¯†é’¥
ssh-keygen -t ed25519 -C "geshixiugai-server"
```

**æ“ä½œæç¤º**ï¼š
- `Enter file in which to save the key`: ç›´æ¥æŒ‰ **Enter**ï¼ˆä½¿ç”¨é»˜è®¤è·¯å¾„ï¼‰
- `Enter passphrase`: å¯ä»¥è®¾ç½®å¯†ç ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‰ **Enter** è·³è¿‡ï¼ˆæ¨èè·³è¿‡ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼‰
- `Enter same passphrase again`: å¦‚æœè®¾ç½®äº†å¯†ç ï¼Œå†è¾“å…¥ä¸€æ¬¡ï¼›å¦‚æœè·³è¿‡äº†ï¼Œç›´æ¥æŒ‰ **Enter**

### æ­¥éª¤ 2ï¼šæŸ¥çœ‹å…¬é’¥

```bash
# æŸ¥çœ‹å…¬é’¥ï¼ˆå¤åˆ¶è¿™ä¸ªï¼‰
cat ~/.ssh/id_ed25519.pub
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx geshixiugai-server
```

**é‡è¦**ï¼šå¤åˆ¶æ•´ä¸ªè¾“å‡ºå†…å®¹ï¼ˆä» `ssh-ed25519` å¼€å§‹åˆ° `geshixiugai-server` ç»“æŸï¼‰

---

### æ­¥éª¤ 3ï¼šå°†å…¬é’¥æ·»åŠ åˆ° GitHub

#### æ–¹æ³• Aï¼šåœ¨æµè§ˆå™¨ä¸­æ“ä½œï¼ˆæ¨èï¼‰

1. **è®¿é—® GitHub è®¾ç½®**ï¼š
   - https://github.com/settings/keys

2. **ç‚¹å‡» "New SSH key"**

3. **å¡«å†™ä¿¡æ¯**ï¼š
   - **Title**ï¼šå¡«å†™ `é˜¿é‡Œäº‘æœåŠ¡å™¨` æˆ– `geshixiugai-server`
   - **Key type**ï¼šé€‰æ‹© `Authentication Key`
   - **Key**ï¼šç²˜è´´åˆšæ‰å¤åˆ¶çš„å…¬é’¥å†…å®¹ï¼ˆæ•´ä¸ª `ssh-ed25519 ...` é‚£è¡Œï¼‰

4. **ç‚¹å‡» "Add SSH key"**

5. **ç¡®è®¤**ï¼šå¯èƒ½éœ€è¦è¾“å…¥ GitHub å¯†ç ç¡®è®¤

#### æ–¹æ³• Bï¼šä½¿ç”¨å‘½ä»¤è¡Œï¼ˆé«˜çº§ï¼Œå¯é€‰ï¼‰

å¦‚æœä½ ç†Ÿæ‚‰å‘½ä»¤è¡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ GitHub CLIï¼Œä½†æµè§ˆå™¨æ–¹æ³•æ›´ç®€å•ã€‚

---

### æ­¥éª¤ 4ï¼šæµ‹è¯• SSH è¿æ¥

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š

```bash
# æµ‹è¯• SSH è¿æ¥
ssh -T git@github.com
```

**æˆåŠŸçš„æƒ…å†µ**ï¼š
```
Hi jet20002025-hash! You've successfully authenticated, but GitHub does not provide shell access.
```

**å¦‚æœè¿˜æ˜¯å¤±è´¥**ï¼š
- æ£€æŸ¥å…¬é’¥æ˜¯å¦æ­£ç¡®å¤åˆ¶ï¼ˆåŒ…æ‹¬å¼€å¤´å’Œç»“å°¾ï¼‰
- ç¡®è®¤å·²æ·»åŠ åˆ° GitHub
- ç­‰å¾…å‡ ç§’é’Ÿå†è¯•ï¼ˆGitHub å¯èƒ½éœ€è¦å‡ ç§’åŒæ­¥ï¼‰

---

### æ­¥éª¤ 5ï¼šä¿®æ”¹ Git è¿œç¨‹åœ°å€å¹¶æ‹‰å–ä»£ç 

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/geshixiugai

# ç¡®è®¤å½“å‰æ˜¯ SSH åœ°å€ï¼ˆåº”è¯¥å·²ç»æ˜¯äº†ï¼‰
git remote -v

# å¦‚æœæ˜¾ç¤º HTTPS åœ°å€ï¼Œæ”¹ä¸º SSH
git remote set-url origin git@github.com:jet20002025-hash/geshixiugai.git

# æ‹‰å–ä»£ç 
git pull origin main
```

---

## ğŸ“‹ å®Œæ•´å‘½ä»¤ï¼ˆå¤åˆ¶ç²˜è´´ï¼‰

### åœ¨æœåŠ¡å™¨ä¸Šä¾æ¬¡æ‰§è¡Œï¼š

```bash
# 1. ç”Ÿæˆ SSH å¯†é’¥
ssh-keygen -t ed25519 -C "geshixiugai-server"
# æŒ‰ Enter ä½¿ç”¨é»˜è®¤è·¯å¾„
# æŒ‰ Enter è·³è¿‡å¯†ç ï¼ˆæˆ–è®¾ç½®å¯†ç ï¼‰

# 2. æŸ¥çœ‹å…¬é’¥ï¼ˆå¤åˆ¶è¿™ä¸ªï¼‰
cat ~/.ssh/id_ed25519.pub

# 3. å°†å…¬é’¥æ·»åŠ åˆ° GitHubï¼ˆåœ¨æµè§ˆå™¨ä¸­æ“ä½œï¼‰
# https://github.com/settings/keys

# 4. æµ‹è¯•è¿æ¥
ssh -T git@github.com

# 5. æ‹‰å–ä»£ç 
cd /var/www/geshixiugai
git pull origin main
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: æç¤º "Enter file in which to save the key"

**A**: ç›´æ¥æŒ‰ **Enter**ï¼Œä½¿ç”¨é»˜è®¤è·¯å¾„ `/root/.ssh/id_ed25519`

### Q2: æç¤º "Enter passphrase"

**A**: 
- å¯ä»¥è®¾ç½®å¯†ç ï¼ˆæ›´å®‰å…¨ï¼Œä½†æ¯æ¬¡ä½¿ç”¨éœ€è¦è¾“å…¥ï¼‰
- ä¹Ÿå¯ä»¥ç›´æ¥æŒ‰ **Enter** è·³è¿‡ï¼ˆæ›´æ–¹ä¾¿ï¼Œæ¨èï¼‰

### Q3: å…¬é’¥å¾ˆé•¿ï¼Œå¦‚ä½•å¤åˆ¶ï¼Ÿ

**A**: 
- åœ¨ç»ˆç«¯ä¸­é€‰ä¸­æ•´ä¸ªè¾“å‡ºï¼ˆä» `ssh-ed25519` åˆ° `geshixiugai-server`ï¼‰
- å³é”®å¤åˆ¶ï¼Œæˆ–ä½¿ç”¨ `Ctrl+Shift+C`ï¼ˆLinuxï¼‰
- ç¡®ä¿å¤åˆ¶å®Œæ•´ï¼ŒåŒ…æ‹¬å¼€å¤´å’Œç»“å°¾

### Q4: æ·»åŠ å…¬é’¥åè¿˜æ˜¯æç¤º "Permission denied"

**A**: 
- ç­‰å¾…å‡ ç§’é’Ÿï¼ˆGitHub éœ€è¦æ—¶é—´åŒæ­¥ï¼‰
- æ£€æŸ¥å…¬é’¥æ˜¯å¦å®Œæ•´å¤åˆ¶ï¼ˆåŒ…æ‹¬ `ssh-ed25519` å¼€å¤´ï¼‰
- ç¡®è®¤æ·»åŠ åˆ°æ­£ç¡®çš„ GitHub è´¦å·
- æ£€æŸ¥å¯†é’¥æ–‡ä»¶æƒé™ï¼š
  ```bash
  chmod 600 ~/.ssh/id_ed25519
  chmod 644 ~/.ssh/id_ed25519.pub
  ```

### Q5: å¦‚ä½•æ£€æŸ¥æ˜¯å¦å·²æœ‰ SSH å¯†é’¥ï¼Ÿ

**A**: 
```bash
ls -la ~/.ssh/
# å¦‚æœçœ‹åˆ° id_ed25519 æˆ– id_rsaï¼Œè¯´æ˜å·²æœ‰å¯†é’¥
```

---

## âœ… éªŒè¯æ­¥éª¤

### 1. æ£€æŸ¥å¯†é’¥æ–‡ä»¶

```bash
ls -la ~/.ssh/
# åº”è¯¥çœ‹åˆ°ï¼š
# id_ed25519      (ç§é’¥)
# id_ed25519.pub  (å…¬é’¥)
```

### 2. æµ‹è¯• SSH è¿æ¥

```bash
ssh -T git@github.com
# åº”è¯¥æ˜¾ç¤ºï¼šHi jet20002025-hash! You've successfully authenticated...
```

### 3. æµ‹è¯• Git æ‹‰å–

```bash
cd /var/www/geshixiugai
git pull origin main
# åº”è¯¥å¯ä»¥æ­£å¸¸æ‹‰å–ï¼Œæ²¡æœ‰é”™è¯¯
```

---

## ğŸ“ æ€»ç»“

**å½“å‰çŠ¶æ€**ï¼šSSH è¿æ¥å·²å»ºç«‹ï¼Œä½†éœ€è¦é…ç½®å¯†é’¥

**æ“ä½œæ­¥éª¤**ï¼š
1. ç”Ÿæˆ SSH å¯†é’¥
2. å¤åˆ¶å…¬é’¥
3. æ·»åŠ åˆ° GitHub
4. æµ‹è¯•è¿æ¥
5. æ‹‰å–ä»£ç 

**ç°åœ¨æ‰§è¡Œ**ï¼šå…ˆæ‰§è¡Œ `ssh-keygen` ç”Ÿæˆå¯†é’¥ï¼Œç„¶åå¤åˆ¶å…¬é’¥æ·»åŠ åˆ° GitHubï¼ğŸš€



