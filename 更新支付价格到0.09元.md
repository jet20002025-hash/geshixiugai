# 更新支付价格到 0.09 元

## 🔍 问题

价格还是显示 ¥0.99，没有更新为 ¥0.09。

---

## 🔧 可能的原因

### 1. 服务器代码还没有更新
- 本地代码已修改，但服务器上还是旧代码

### 2. 服务器上的 .env 文件设置了价格
- 如果 `.env` 文件中有 `PAYMENT_PRICE=0.99`，会覆盖默认值

### 3. 浏览器缓存
- 浏览器可能缓存了旧的价格

---

## ✅ 解决步骤

### 步骤 1：确保本地代码已提交

在你的电脑上执行：

```bash
cd /Users/zwj/word格式修改器

# 检查代码是否已提交
git status

# 如果还没有提交，提交代码
git add backend/app/services/payment_service.py
git commit -m "修改支付价格为0.09元"
git push origin main
```

### 步骤 2：在服务器上更新代码

在服务器上执行（使用阿里云控制台网页终端或SSH）：

```bash
cd /var/www/geshixiugai

# 拉取最新代码
git pull origin main

# 验证代码已更新
grep "DEFAULT_PRICE" backend/app/services/payment_service.py
# 应该显示：DEFAULT_PRICE = 0.09
```

### 步骤 3：检查并修改 .env 文件

```bash
# 检查 .env 文件中的价格设置
cat /var/www/geshixiugai/.env | grep PAYMENT_PRICE
```

**如果显示 `PAYMENT_PRICE=0.99`**，需要修改：

```bash
# 编辑 .env 文件
vi /var/www/geshixiugai/.env
# 或使用其他编辑器

# 找到 PAYMENT_PRICE=0.99 这一行
# 修改为：PAYMENT_PRICE=0.09
# 或者删除这一行（使用默认值 0.09）
```

**如果显示 `PAYMENT_PRICE=0.09`**，说明已正确设置。

**如果没有显示**，说明没有设置，会使用默认值 0.09。

### 步骤 4：重启服务

```bash
# 重启服务
sudo systemctl restart geshixiugai

# 检查服务状态
sudo systemctl status geshixiugai
```

### 步骤 5：清除浏览器缓存

1. **按 `Ctrl + Shift + R`**（Windows/Linux）或 **`Cmd + Shift + R`**（Mac）强制刷新
2. 或者清除浏览器缓存后刷新

---

## 📋 完整命令（复制粘贴）

### 在你的电脑上

```bash
cd /Users/zwj/word格式修改器
git add backend/app/services/payment_service.py
git commit -m "修改支付价格为0.09元"
git push origin main
```

### 在服务器上

```bash
# 1. 拉取代码
cd /var/www/geshixiugai
git pull origin main

# 2. 检查代码是否更新
grep "DEFAULT_PRICE" backend/app/services/payment_service.py

# 3. 检查 .env 文件
cat .env | grep PAYMENT_PRICE

# 4. 如果 .env 中有 PAYMENT_PRICE=0.99，修改为 0.09
# 使用 vi 编辑：
vi .env
# 找到 PAYMENT_PRICE=0.99，改为 PAYMENT_PRICE=0.09
# 保存退出（:wq）

# 5. 重启服务
sudo systemctl restart geshixiugai

# 6. 检查服务状态
sudo systemctl status geshixiugai
```

---

## 🔍 验证

### 方法 1：检查代码

```bash
# 在服务器上执行
grep "DEFAULT_PRICE" /var/www/geshixiugai/backend/app/services/payment_service.py
# 应该显示：DEFAULT_PRICE = 0.09
```

### 方法 2：检查环境变量

```bash
# 在服务器上执行
cat /var/www/geshixiugai/.env | grep PAYMENT_PRICE
# 如果显示，应该是：PAYMENT_PRICE=0.09
# 如果没有显示，会使用默认值 0.09
```

### 方法 3：测试网站

1. 访问网站
2. 上传文档
3. 应该看到：**支付金额：¥0.09**

---

## ⚠️ 常见问题

### Q1: 代码已更新，但还是显示 0.99？

**A**: 检查 `.env` 文件，可能设置了 `PAYMENT_PRICE=0.99`

### Q2: .env 文件在哪里？

**A**: `/var/www/geshixiugai/.env`

### Q3: 如何修改 .env 文件？

**A**: 
```bash
# 使用 vi 编辑器
vi /var/www/geshixiugai/.env

# 找到 PAYMENT_PRICE 这一行
# 按 i 进入编辑模式
# 修改为 PAYMENT_PRICE=0.09
# 按 Esc 退出编辑模式
# 输入 :wq 保存并退出
```

### Q4: 修改后需要重启服务吗？

**A**: 是的，修改 `.env` 文件后需要重启服务：
```bash
sudo systemctl restart geshixiugai
```

---

## 📝 总结

**问题**：价格还是显示 0.99

**解决**：
1. 确保代码已更新到服务器
2. 检查并修改 `.env` 文件中的 `PAYMENT_PRICE`
3. 重启服务
4. 清除浏览器缓存

**现在执行**：在服务器上检查 `.env` 文件，然后重启服务！🚀




