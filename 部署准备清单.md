# éƒ¨ç½²å‡†å¤‡æ¸…å• - geshixiugai.cn

## âœ… å·²å®Œæˆ

- [x] é˜¿é‡Œäº‘æœåŠ¡å™¨å·²è´­ä¹°
- [x] å¤‡æ¡ˆå®¡æ ¸å·²é€šè¿‡
- [x] åŸŸå geshixiugai.cn å·²è´­ä¹°å¹¶å®åè®¤è¯
- [x] ä»£ç å·²æ›´æ–°æ”¯æŒ .env æ–‡ä»¶è¯»å–
- [x] éƒ¨ç½²è„šæœ¬å’Œé…ç½®æ–‡ä»¶å·²åˆ›å»º

## ğŸ“‹ æ¥ä¸‹æ¥è¦åšçš„æ­¥éª¤

### 1. å‡†å¤‡æœåŠ¡å™¨ä¿¡æ¯

è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
- [ ] æœåŠ¡å™¨å…¬ç½‘ IPï¼š`_____________`
- [ ] æœåŠ¡å™¨ root å¯†ç ï¼š`_____________`
- [ ] æœåŠ¡å™¨æ“ä½œç³»ç»Ÿï¼š`_____________`

### 2. å‡†å¤‡å­˜å‚¨é…ç½®ä¿¡æ¯

æ ¹æ®ä½ ä½¿ç”¨çš„å­˜å‚¨æ–¹æ¡ˆï¼Œå‡†å¤‡ç›¸åº”çš„é…ç½®ä¿¡æ¯ï¼š

**å¦‚æœä½¿ç”¨ Supabase Storage**ï¼š
- [ ] SUPABASE_URLï¼š`_____________`
- [ ] SUPABASE_KEYï¼š`_____________`
- [ ] SUPABASE_BUCKETï¼š`word-formatter-storage`

**å¦‚æœä½¿ç”¨ Cloudflare R2**ï¼š
- [ ] R2_ACCOUNT_IDï¼š`_____________`
- [ ] R2_ACCESS_KEY_IDï¼š`_____________`
- [ ] R2_SECRET_ACCESS_KEYï¼š`_____________`
- [ ] R2_BUCKET_NAMEï¼š`word-formatter-storage`
- [ ] R2_ENDPOINTï¼š`_____________`

### 3. å‡†å¤‡æ”¯ä»˜é…ç½®ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰

- [ ] æ”¯ä»˜å® AppIDï¼š`_____________`
- [ ] æ”¯ä»˜å®ç§é’¥ï¼š`_____________`
- [ ] æ”¯ä»˜å®å…¬é’¥ï¼š`_____________`

### 4. éƒ¨ç½²æ­¥éª¤

#### æ­¥éª¤ 1ï¼šè¿æ¥åˆ°æœåŠ¡å™¨

```bash
ssh root@ä½ çš„æœåŠ¡å™¨å…¬ç½‘IP
```

#### æ­¥éª¤ 2ï¼šä¸Šä¼ ä»£ç 

**æ–¹å¼ 1ï¼šä½¿ç”¨ Gitï¼ˆæ¨èï¼‰**

```bash
cd /var/www
git clone https://github.com/jet20002025-hash/geshixiugai.git geshixiugai
cd geshixiugai
```

**æ–¹å¼ 2ï¼šä½¿ç”¨ SCPï¼ˆå¦‚æœä»£ç æœªæ¨é€åˆ° Gitï¼‰**

åœ¨æœ¬åœ°ç”µè„‘è¿è¡Œï¼š
```bash
scp -r /Users/zwj/wordæ ¼å¼ä¿®æ”¹å™¨ root@ä½ çš„æœåŠ¡å™¨IP:/var/www/geshixiugai
```

#### æ­¥éª¤ 3ï¼šè¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
cd /var/www/geshixiugai
chmod +x deploy_aliyun.sh
sudo ./deploy_aliyun.sh
```

#### æ­¥éª¤ 4ï¼šé…ç½®ç¯å¢ƒå˜é‡

```bash
cd /var/www/geshixiugai
cp env.example .env
nano .env
```

å¡«å…¥ä½ çš„é…ç½®ä¿¡æ¯ï¼Œä¿å­˜é€€å‡ºã€‚

#### æ­¥éª¤ 5ï¼šé‡å¯æœåŠ¡

```bash
sudo systemctl restart geshixiugai
sudo systemctl status geshixiugai
```

#### æ­¥éª¤ 6ï¼šé…ç½®åŸŸåè§£æ

1. ç™»å½•é˜¿é‡Œäº‘ DNS æ§åˆ¶å°ï¼šhttps://dns.console.aliyun.com/
2. æ‰¾åˆ°åŸŸå `geshixiugai.cn`
3. æ·»åŠ  A è®°å½•ï¼š
   - ä¸»æœºè®°å½•ï¼š@ï¼Œè®°å½•å€¼ï¼šä½ çš„æœåŠ¡å™¨å…¬ç½‘ IP
   - ä¸»æœºè®°å½•ï¼šwwwï¼Œè®°å½•å€¼ï¼šä½ çš„æœåŠ¡å™¨å…¬ç½‘ IP

#### æ­¥éª¤ 7ï¼šé…ç½® SSL è¯ä¹¦

```bash
sudo apt install -y certbot python3-certbot-nginx
sudo certbot --nginx -d geshixiugai.cn -d www.geshixiugai.cn
```

#### æ­¥éª¤ 8ï¼šæµ‹è¯•è®¿é—®

- [ ] è®¿é—® `https://geshixiugai.cn` æ­£å¸¸
- [ ] è®¿é—® `https://geshixiugai.cn/web` æ­£å¸¸
- [ ] è®¿é—® `https://geshixiugai.cn/docs` æ­£å¸¸
- [ ] æµ‹è¯•æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸

#### æ­¥éª¤ 9ï¼šæ·»åŠ å¤‡æ¡ˆå·

åœ¨ `frontend/index.html` åº•éƒ¨æ·»åŠ å¤‡æ¡ˆå·æ˜¾ç¤ºã€‚

---

## ğŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶

### éƒ¨ç½²è„šæœ¬
- âœ… `deploy_aliyun.sh` - è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
- âœ… `gunicorn_config.py` - Gunicorn é…ç½®æ–‡ä»¶

### é…ç½®æ–‡ä»¶æ¨¡æ¿
- âœ… `nginx_geshixiugai.conf` - Nginx é…ç½®æ¨¡æ¿
- âœ… `systemd_geshixiugai.service` - Systemd æœåŠ¡æ¨¡æ¿
- âœ… `env.example` - ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹

### æ–‡æ¡£
- âœ… `é˜¿é‡Œäº‘è¿ç§»å®Œæ•´æŒ‡å—.md` - è¯¦ç»†è¿ç§»æŒ‡å—
- âœ… `é˜¿é‡Œäº‘å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md` - å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

---

## ğŸ” æ•…éšœæ’æŸ¥

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š

1. **æœåŠ¡æ—¥å¿—**ï¼š
   ```bash
   sudo journalctl -u geshixiugai -f
   ```

2. **Nginx æ—¥å¿—**ï¼š
   ```bash
   sudo tail -f /var/log/nginx/geshixiugai_error.log
   ```

3. **æœåŠ¡çŠ¶æ€**ï¼š
   ```bash
   sudo systemctl status geshixiugai
   ```

4. **ç«¯å£ç›‘å¬**ï¼š
   ```bash
   sudo netstat -tlnp | grep 8000
   ```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å‚è€ƒä»¥ä¸‹æ–‡æ¡£ï¼š
- `é˜¿é‡Œäº‘å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md` - å¿«é€Ÿéƒ¨ç½²æ­¥éª¤
- `é˜¿é‡Œäº‘è¿ç§»å®Œæ•´æŒ‡å—.md` - è¯¦ç»†è¯´æ˜å’Œæ•…éšœæ’æŸ¥

---

**å‡†å¤‡å¥½åï¼ŒæŒ‰ç…§ä¸Šè¿°æ­¥éª¤å¼€å§‹éƒ¨ç½²ï¼** ğŸš€


