# ç§æœ‰ä»“åº“å¯¹å¼€å‘çš„å½±å“å’Œè§£å†³æ–¹æ¡ˆ

## ğŸ“‹ å½±å“åˆ†æ

### âœ… åŸºæœ¬æ— å½±å“çš„éƒ¨åˆ†

1. **æœ¬åœ°å¼€å‘**
   - âœ… ä½ æœ¬åœ°å·²ç»æœ‰ä»£ç ï¼Œå¯ä»¥æ­£å¸¸å¼€å‘
   - âœ… Git æ“ä½œï¼ˆcommitã€pushï¼‰å®Œå…¨æ­£å¸¸
   - âœ… ä»£ç æäº¤åˆ° GitHub ä¸å—å½±å“

2. **ä»£ç ç®¡ç†**
   - âœ… ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½å®Œå…¨æ­£å¸¸
   - âœ… Git å†å²è®°å½•ä¸å—å½±å“
   - âœ… åˆ†æ”¯ç®¡ç†ä¸å—å½±å“

### âš ï¸ éœ€è¦æ³¨æ„çš„éƒ¨åˆ†

1. **æœåŠ¡å™¨æ‹‰å–ä»£ç **
   - âš ï¸ ç§æœ‰ä»“åº“éœ€è¦è®¤è¯æ‰èƒ½æ‹‰å–
   - âš ï¸ æœåŠ¡å™¨éœ€è¦é…ç½®è®¿é—®æƒé™

2. **å¤šäººåä½œ**ï¼ˆå¦‚æœæœ‰ï¼‰
   - âš ï¸ éœ€è¦æ·»åŠ åä½œè€…æ‰èƒ½è®¿é—®
   - âš ï¸ éœ€è¦é…ç½® SSH å¯†é’¥æˆ–è®¿é—®ä»¤ç‰Œ

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ SSH å¯†é’¥ï¼ˆæ¨èï¼‰â­

**ä¼˜ç‚¹**ï¼š
- âœ… å®‰å…¨å¯é 
- âœ… ä¸€æ¬¡é…ç½®ï¼Œé•¿æœŸä½¿ç”¨
- âœ… ä¸éœ€è¦æ¯æ¬¡è¾“å…¥å¯†ç 

**æ“ä½œæ­¥éª¤**ï¼š

#### 1. åœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆ SSH å¯†é’¥

```bash
# è¿æ¥æœåŠ¡å™¨
ssh root@121.199.49.1

# ç”Ÿæˆ SSH å¯†é’¥ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
ssh-keygen -t ed25519 -C "geshixiugai-server"
# æŒ‰ Enter ä½¿ç”¨é»˜è®¤è·¯å¾„
# å¯ä»¥è®¾ç½®å¯†ç ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‰ Enter è·³è¿‡

# æŸ¥çœ‹å…¬é’¥
cat ~/.ssh/id_ed25519.pub
```

#### 2. å°†å…¬é’¥æ·»åŠ åˆ° GitHub

1. **å¤åˆ¶å…¬é’¥å†…å®¹**ï¼ˆä»æœåŠ¡å™¨ä¸Šï¼‰
   ```bash
   cat ~/.ssh/id_ed25519.pub
   # å¤åˆ¶è¾“å‡ºçš„å†…å®¹
   ```

2. **æ·»åŠ åˆ° GitHub**ï¼š
   - è®¿é—®ï¼šhttps://github.com/settings/keys
   - ç‚¹å‡» **"New SSH key"**
   - Titleï¼šå¡«å†™ `é˜¿é‡Œäº‘æœåŠ¡å™¨` æˆ– `geshixiugai-server`
   - Keyï¼šç²˜è´´åˆšæ‰å¤åˆ¶çš„å…¬é’¥
   - ç‚¹å‡» **"Add SSH key"**

#### 3. ä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„ Git è¿œç¨‹åœ°å€

```bash
# åœ¨æœåŠ¡å™¨ä¸Š
cd /var/www/geshixiugai

# æ£€æŸ¥å½“å‰è¿œç¨‹åœ°å€
git remote -v

# å¦‚æœæ˜¾ç¤º HTTPS åœ°å€ï¼Œæ”¹ä¸º SSH åœ°å€
git remote set-url origin git@github.com:jet20002025-hash/geshixiugai.git

# éªŒè¯
git remote -v
# åº”è¯¥æ˜¾ç¤ºï¼šgit@github.com:jet20002025-hash/geshixiugai.git

# æµ‹è¯•è¿æ¥
ssh -T git@github.com
# åº”è¯¥æ˜¾ç¤ºï¼šHi jet20002025-hash! You've successfully authenticated...
```

#### 4. æµ‹è¯•æ‹‰å–ä»£ç 

```bash
# æµ‹è¯•æ‹‰å–
cd /var/www/geshixiugai
git pull origin main
# åº”è¯¥å¯ä»¥æ­£å¸¸æ‹‰å–ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç 
```

---

### æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ Personal Access Tokenï¼ˆPATï¼‰

**ä¼˜ç‚¹**ï¼š
- âœ… é…ç½®ç®€å•
- âœ… å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´
- âœ… å¯ä»¥æ’¤é”€

**ç¼ºç‚¹**ï¼š
- âš ï¸ éœ€è¦å®šæœŸæ›´æ–°
- âš ï¸ å¦‚æœæ³„éœ²éœ€è¦ç«‹å³æ’¤é”€

**æ“ä½œæ­¥éª¤**ï¼š

#### 1. åˆ›å»º Personal Access Token

1. **è®¿é—® GitHub è®¾ç½®**ï¼š
   - https://github.com/settings/tokens
   - ç‚¹å‡» **"Generate new token"** â†’ **"Generate new token (classic)"**

2. **é…ç½® Token**ï¼š
   - Noteï¼šå¡«å†™ `é˜¿é‡Œäº‘æœåŠ¡å™¨` æˆ– `geshixiugai-deploy`
   - Expirationï¼šé€‰æ‹©è¿‡æœŸæ—¶é—´ï¼ˆå»ºè®® 90 å¤©æˆ– 1 å¹´ï¼‰
   - Scopesï¼šå‹¾é€‰ `repo`ï¼ˆå®Œæ•´ä»“åº“è®¿é—®æƒé™ï¼‰
   - ç‚¹å‡» **"Generate token"**

3. **å¤åˆ¶ Token**ï¼š
   - âš ï¸ **é‡è¦**ï¼šToken åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œç«‹å³å¤åˆ¶ä¿å­˜

#### 2. åœ¨æœåŠ¡å™¨ä¸Šé…ç½®

```bash
# è¿æ¥æœåŠ¡å™¨
ssh root@121.199.49.1

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/geshixiugai

# ä¿®æ”¹è¿œç¨‹åœ°å€ï¼Œä½¿ç”¨ Token
git remote set-url origin https://ä½ çš„Token@github.com/jet20002025-hash/geshixiugai.git

# æˆ–è€…ä½¿ç”¨ç”¨æˆ·åå’Œ Token
git remote set-url origin https://jet20002025-hash:ä½ çš„Token@github.com/jet20002025-hash/geshixiugai.git

# æµ‹è¯•æ‹‰å–
git pull origin main
```

#### 3. ä½¿ç”¨ Git Credential Helperï¼ˆæ¨èï¼‰

```bash
# é…ç½® Git å‡­æ®å­˜å‚¨
git config --global credential.helper store

# ç¬¬ä¸€æ¬¡æ‹‰å–æ—¶ä¼šæç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
# ç”¨æˆ·åï¼šä½ çš„ GitHub ç”¨æˆ·å
# å¯†ç ï¼šä½¿ç”¨åˆšæ‰åˆ›å»ºçš„ Tokenï¼ˆä¸æ˜¯ GitHub å¯†ç ï¼‰

git pull origin main
# è¾“å…¥ç”¨æˆ·åå’Œ Token åï¼ŒGit ä¼šè‡ªåŠ¨ä¿å­˜
```

---

### æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ Deploy Keyï¼ˆä»…é™å•ä¸ªä»“åº“ï¼‰

**ä¼˜ç‚¹**ï¼š
- âœ… åªèƒ½è®¿é—®æŒ‡å®šä»“åº“
- âœ… æ›´å®‰å…¨ï¼ˆæƒé™æœ€å°åŒ–ï¼‰

**ç¼ºç‚¹**ï¼š
- âš ï¸ åªèƒ½ç”¨äºå•ä¸ªä»“åº“
- âš ï¸ ä¸èƒ½ç”¨äºæ¨é€ï¼ˆåªèƒ½æ‹‰å–ï¼‰

**æ“ä½œæ­¥éª¤**ï¼š

#### 1. åœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆå¯†é’¥

```bash
# è¿æ¥æœåŠ¡å™¨
ssh root@121.199.49.1

# ç”Ÿæˆä¸“ç”¨å¯†é’¥ï¼ˆç”¨äºéƒ¨ç½²ï¼‰
ssh-keygen -t ed25519 -C "geshixiugai-deploy" -f ~/.ssh/github_deploy_key
# æŒ‰ Enter ä½¿ç”¨é»˜è®¤è·¯å¾„ï¼Œå¯ä»¥è®¾ç½®å¯†ç æˆ–è·³è¿‡

# æŸ¥çœ‹å…¬é’¥
cat ~/.ssh/github_deploy_key.pub
```

#### 2. æ·»åŠ åˆ° GitHub Deploy Keys

1. **è®¿é—®ä»“åº“è®¾ç½®**ï¼š
   - https://github.com/jet20002025-hash/geshixiugai/settings/keys

2. **æ·»åŠ  Deploy Key**ï¼š
   - ç‚¹å‡» **"Add deploy key"**
   - Titleï¼šå¡«å†™ `é˜¿é‡Œäº‘æœåŠ¡å™¨éƒ¨ç½²`
   - Keyï¼šç²˜è´´åˆšæ‰å¤åˆ¶çš„å…¬é’¥
   - âœ… å‹¾é€‰ **"Allow write access"**ï¼ˆå¦‚æœéœ€è¦æ¨é€ï¼‰
   - ç‚¹å‡» **"Add key"**

#### 3. é…ç½®æœåŠ¡å™¨ä½¿ç”¨ Deploy Key

```bash
# åœ¨æœåŠ¡å™¨ä¸Šé…ç½® SSH
cd ~/.ssh

# åˆ›å»ºæˆ–ç¼–è¾‘ SSH é…ç½®æ–‡ä»¶
nano config

# æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
Host github.com-geshixiugai
    HostName github.com
    User git
    IdentityFile ~/.ssh/github_deploy_key
    IdentitiesOnly yes

# ä¿å­˜å¹¶é€€å‡ºï¼ˆCtrl+X, Y, Enterï¼‰

# ä¿®æ”¹é¡¹ç›®è¿œç¨‹åœ°å€
cd /var/www/geshixiugai
git remote set-url origin git@github.com-geshixiugai:jet20002025-hash/geshixiugai.git

# æµ‹è¯•è¿æ¥
ssh -T git@github.com-geshixiugai
# åº”è¯¥æ˜¾ç¤ºï¼šHi jet20002025-hash! You've successfully authenticated...

# æµ‹è¯•æ‹‰å–
git pull origin main
```

---

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | å®‰å…¨æ€§ | æ˜“ç”¨æ€§ | é€‚ç”¨åœºæ™¯ |
|------|--------|--------|----------|
| **SSH å¯†é’¥** | â­â­â­â­â­ | â­â­â­â­ | é•¿æœŸä½¿ç”¨ï¼Œæ¨è |
| **Personal Access Token** | â­â­â­â­ | â­â­â­â­â­ | ä¸´æ—¶ä½¿ç”¨ï¼Œç®€å•å¿«é€Ÿ |
| **Deploy Key** | â­â­â­â­â­ | â­â­â­ | å•ä»“åº“ï¼Œæœ€å®‰å…¨ |

---

## ğŸ”„ æ›´æ–°ä»£ç æµç¨‹ï¼ˆæ”¹ä¸ºç§æœ‰åï¼‰

### æ ‡å‡†æµç¨‹ï¼ˆæ— å˜åŒ–ï¼‰

```
æœ¬åœ°ä¿®æ”¹ä»£ç 
    â†“
æäº¤åˆ° GitHubï¼ˆgit pushï¼‰
    â†“
æœåŠ¡å™¨æ‹‰å–æ›´æ–°ï¼ˆgit pullï¼‰â† éœ€è¦è®¤è¯
    â†“
é‡å¯æœåŠ¡ï¼ˆsystemctl restartï¼‰
```

### è¯¦ç»†æ­¥éª¤

#### 1. æœ¬åœ°å¼€å‘ï¼ˆæ— å˜åŒ–ï¼‰

```bash
# åœ¨ä½ çš„ç”µè„‘ä¸Š
cd /Users/zwj/wordæ ¼å¼ä¿®æ”¹å™¨

# ä¿®æ”¹ä»£ç å
git add .
git commit -m "ä¿®æ”¹è¯´æ˜"
git push origin main
# æ­£å¸¸æ¨é€ï¼Œæ— å½±å“
```

#### 2. æœåŠ¡å™¨æ›´æ–°ï¼ˆéœ€è¦è®¤è¯ï¼‰

```bash
# è¿æ¥æœåŠ¡å™¨
ssh root@121.199.49.1

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/geshixiugai

# æ‹‰å–æ›´æ–°ï¼ˆå¦‚æœé…ç½®äº† SSH å¯†é’¥ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ï¼‰
git pull origin main

# é‡å¯æœåŠ¡
sudo systemctl restart geshixiugai
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: æ”¹ä¸ºç§æœ‰åï¼ŒæœåŠ¡å™¨æ— æ³•æ‹‰å–ä»£ç ï¼Ÿ

**A**: éœ€è¦é…ç½®è®¤è¯æ–¹å¼ï¼ˆSSH å¯†é’¥ã€Token æˆ– Deploy Keyï¼‰

### Q2: ä½¿ç”¨ HTTPS åœ°å€æ‹‰å–æ—¶æç¤ºéœ€è¦å¯†ç ï¼Ÿ

**A**: 
- å¦‚æœä½¿ç”¨ HTTPSï¼Œéœ€è¦ä½¿ç”¨ Personal Access Token ä½œä¸ºå¯†ç 
- æˆ–è€…æ”¹ç”¨ SSH åœ°å€ï¼ˆæ¨èï¼‰

### Q3: å¦‚ä½•æ£€æŸ¥å½“å‰ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆè®¤è¯æ–¹å¼ï¼Ÿ

**A**:
```bash
# æ£€æŸ¥è¿œç¨‹åœ°å€
git remote -v

# HTTPS åœ°å€ï¼šhttps://github.com/...
# SSH åœ°å€ï¼šgit@github.com:...
```

### Q4: å¤šäººåä½œæ€ä¹ˆåŠï¼Ÿ

**A**: 
- åœ¨ä»“åº“è®¾ç½®ä¸­æ·»åŠ åä½œè€…ï¼šSettings â†’ Collaborators
- æˆ–è€…ä½¿ç”¨ GitHub Organizations

---

## ğŸ“ æ¨èé…ç½®

### æœ€ä½³å®è·µ

1. **ä½¿ç”¨ SSH å¯†é’¥**ï¼ˆæ–¹æ¡ˆ 1ï¼‰
   - ä¸€æ¬¡é…ç½®ï¼Œé•¿æœŸä½¿ç”¨
   - å®‰å…¨å¯é 
   - ä¸éœ€è¦å®šæœŸæ›´æ–°

2. **é…ç½®æ­¥éª¤**ï¼š
   ```bash
   # 1. ç”Ÿæˆ SSH å¯†é’¥
   ssh-keygen -t ed25519 -C "geshixiugai-server"
   
   # 2. æ·»åŠ åˆ° GitHub
   cat ~/.ssh/id_ed25519.pub
   # å¤åˆ¶åˆ° GitHub Settings â†’ SSH and GPG keys
   
   # 3. ä¿®æ”¹è¿œç¨‹åœ°å€
   git remote set-url origin git@github.com:jet20002025-hash/geshixiugai.git
   
   # 4. æµ‹è¯•
   ssh -T git@github.com
   git pull origin main
   ```

---

## âœ… æ€»ç»“

### æ”¹ä¸ºç§æœ‰åçš„å½±å“

| æ–¹é¢ | å½±å“ | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| **æœ¬åœ°å¼€å‘** | âœ… æ— å½±å“ | æ— éœ€æ“ä½œ |
| **ä»£ç æäº¤** | âœ… æ— å½±å“ | æ— éœ€æ“ä½œ |
| **æœåŠ¡å™¨æ‹‰å–** | âš ï¸ éœ€è¦è®¤è¯ | é…ç½® SSH å¯†é’¥ï¼ˆæ¨èï¼‰ |
| **å¤šäººåä½œ** | âš ï¸ éœ€è¦æ·»åŠ åä½œè€… | åœ¨ä»“åº“è®¾ç½®ä¸­æ·»åŠ  |

### æ¨èæ“ä½œ

1. **ç«‹å³å°†ä»“åº“æ”¹ä¸ºç§æœ‰**ï¼ˆå®‰å…¨ç¬¬ä¸€ï¼‰
2. **é…ç½® SSH å¯†é’¥**ï¼ˆä¸€æ¬¡é…ç½®ï¼Œé•¿æœŸä½¿ç”¨ï¼‰
3. **æµ‹è¯•æœåŠ¡å™¨æ‹‰å–**ï¼ˆç¡®ä¿æ­£å¸¸å·¥ä½œï¼‰

---

**ç»“è®ºï¼šæ”¹ä¸ºç§æœ‰å¯¹å¼€å‘åŸºæœ¬æ— å½±å“ï¼Œåªéœ€è¦é…ç½®ä¸€æ¬¡æœåŠ¡å™¨è®¤è¯å³å¯ï¼** ğŸš€







