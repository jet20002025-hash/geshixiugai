# ä¿®å¤é¢„è®¾æ¨¡æ¿åŠ è½½å¤±è´¥

## ğŸ” é—®é¢˜

ä¸‹æ‹‰æ¡†æ˜¾ç¤º"åŠ è½½å¤±è´¥"ï¼Œè¯´æ˜ `/templates/presets` API è¯·æ±‚å¤±è´¥ã€‚

---

## âœ… å·²ä¿®å¤

### 1. å¢å¼ºé”™è¯¯å¤„ç†
- âœ… API è¿”å›ç©ºåˆ—è¡¨è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸
- âœ… æ·»åŠ è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
- âœ… æ–‡ä»¶ä¸å­˜åœ¨æ—¶è¿”å›ç©ºåˆ—è¡¨

### 2. æ·»åŠ è¯¦ç»†æ—¥å¿—
- âœ… è®°å½•æ–‡ä»¶è·¯å¾„å’Œæ˜¯å¦å­˜åœ¨
- âœ… è®°å½•åŠ è½½çš„å¤§å­¦æ•°é‡
- âœ… è®°å½•é”™è¯¯å †æ ˆ

---

## ğŸ”§ è§£å†³æ­¥éª¤

### æ­¥éª¤ 1ï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ**ï¼š

```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la /var/www/geshixiugai/backend/app/services/university_templates.json

# å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦åˆ›å»ºæˆ–å¤åˆ¶
```

### æ­¥éª¤ 2ï¼šå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–‡ä»¶

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ**ï¼š

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/geshixiugai

# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
if [ ! -f "backend/app/services/university_templates.json" ]; then
  echo "æ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦åˆ›å»º"
  # ä»GitHubæ‹‰å–æœ€æ–°ä»£ç ï¼ˆå¦‚æœæ–‡ä»¶åœ¨ä»£ç åº“ä¸­ï¼‰
  git pull origin main
fi
```

### æ­¥éª¤ 3ï¼šæ£€æŸ¥æ–‡ä»¶å†…å®¹

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ**ï¼š

```bash
# æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼ˆå‰20è¡Œï¼‰
head -20 /var/www/geshixiugai/backend/app/services/university_templates.json

# æ£€æŸ¥JSONæ ¼å¼æ˜¯å¦æ­£ç¡®
python3 -m json.tool /var/www/geshixiugai/backend/app/services/university_templates.json > /dev/null
if [ $? -eq 0 ]; then
  echo "JSONæ ¼å¼æ­£ç¡®"
else
  echo "JSONæ ¼å¼é”™è¯¯"
fi
```

### æ­¥éª¤ 4ï¼šæ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—

**åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ**ï¼š

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
sudo journalctl -u geshixiugai -n 100 --no-pager | grep -i "template\|university"

# åº”è¯¥çœ‹åˆ°ï¼š
# [UniversityTemplateService] å°è¯•åŠ è½½æ¨¡æ¿æ–‡ä»¶: ...
# [UniversityTemplateService] æ–‡ä»¶æ˜¯å¦å­˜åœ¨: True/False
# [UniversityTemplateService] æˆåŠŸåŠ è½½æ¨¡æ¿æ–‡ä»¶ï¼ŒåŒ…å« X æ‰€å¤§å­¦
```

### æ­¥éª¤ 5ï¼šæµ‹è¯•APIç«¯ç‚¹

**åœ¨æµè§ˆå™¨ä¸­è®¿é—®**ï¼š

```
https://geshixiugai.cn/templates/presets
```

**åº”è¯¥è¿”å›**ï¼š
```json
[
  {
    "id": "hdu",
    "name": "æ­å·ç”µå­ç§‘æŠ€å¤§å­¦",
    "display_name": "æ­å·ç”µå­ç§‘æŠ€å¤§å­¦",
    "description": "æ­å·ç”µå­ç§‘æŠ€å¤§å­¦æ¯•ä¸šè®ºæ–‡æ ¼å¼è§„èŒƒï¼ˆé»˜è®¤æ ‡å‡†ï¼‰"
  },
  ...
]
```

**æˆ–è€…åœ¨æœåŠ¡å™¨ä¸Šæµ‹è¯•**ï¼š

```bash
curl http://localhost:8000/templates/presets
```

### æ­¥éª¤ 6ï¼šæ›´æ–°ä»£ç å¹¶é‡å¯æœåŠ¡

**åœ¨ä½ çš„ç”µè„‘ä¸Š**ï¼š

```bash
cd /Users/zwj/wordæ ¼å¼ä¿®æ”¹å™¨
git add backend/app/api/templates.py backend/app/services/university_template_service.py
git commit -m "å¢å¼ºï¼šé¢„è®¾æ¨¡æ¿åŠ è½½çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—"
git push origin main
```

**åœ¨æœåŠ¡å™¨ä¸Š**ï¼š

```bash
cd /var/www/geshixiugai
git pull origin main
sudo systemctl restart geshixiugai
sudo systemctl status geshixiugai
```

---

## ğŸ“‹ å®Œæ•´æ£€æŸ¥æ¸…å•

è¯·æŒ‰é¡ºåºæ‰§è¡Œï¼š

- [ ] æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`ls -la /var/www/geshixiugai/backend/app/services/university_templates.json`
- [ ] å¦‚æœä¸å­˜åœ¨ï¼Œä»GitHubæ‹‰å–ä»£ç ï¼š`git pull origin main`
- [ ] æ£€æŸ¥æ–‡ä»¶å†…å®¹ï¼š`head -20 backend/app/services/university_templates.json`
- [ ] æ£€æŸ¥JSONæ ¼å¼ï¼š`python3 -m json.tool backend/app/services/university_templates.json`
- [ ] æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ï¼š`sudo journalctl -u geshixiugai -n 100 | grep university`
- [ ] æµ‹è¯•APIï¼š`curl http://localhost:8000/templates/presets`
- [ ] æ›´æ–°ä»£ç å¹¶é‡å¯æœåŠ¡

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ–‡ä»¶ä¸å­˜åœ¨

**è§£å†³æ–¹æ³•**ï¼š
1. ä»GitHubæ‹‰å–æœ€æ–°ä»£ç 
2. æˆ–è€…æ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶ï¼ˆå¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼‰

### Q2: JSONæ ¼å¼é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥æ–‡ä»¶å†…å®¹
2. ä½¿ç”¨ `python3 -m json.tool` éªŒè¯æ ¼å¼
3. ä¿®å¤æ ¼å¼é”™è¯¯

### Q3: æƒé™é—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la /var/www/geshixiugai/backend/app/services/university_templates.json

# å¦‚æœæƒé™ä¸å¯¹ï¼Œä¿®æ”¹æƒé™
chmod 644 /var/www/geshixiugai/backend/app/services/university_templates.json
chown nginx:nginx /var/www/geshixiugai/backend/app/services/university_templates.json
```

### Q4: APIè¿”å›500é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
1. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ï¼š`sudo journalctl -u geshixiugai -n 100`
2. æ£€æŸ¥é”™è¯¯ä¿¡æ¯
3. æ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®å¤

---

## ğŸ“ å¿«é€Ÿä¿®å¤å‘½ä»¤

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ‰§è¡Œï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Š
cd /var/www/geshixiugai

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
if [ -f "backend/app/services/university_templates.json" ]; then
  echo "æ–‡ä»¶å­˜åœ¨"
  # æ£€æŸ¥æ–‡ä»¶å†…å®¹
  head -5 backend/app/services/university_templates.json
else
  echo "æ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦åˆ›å»º"
  # ä»æœ¬åœ°å¤åˆ¶ï¼ˆå¦‚æœä½ æœ‰æœ¬åœ°æ–‡ä»¶ï¼‰
  # æˆ–è€…ä»GitHubæ‹‰å–
fi

# é‡å¯æœåŠ¡
sudo systemctl restart geshixiugai
```

---

## âœ… éªŒè¯

ä¿®å¤åï¼Œåº”è¯¥ï¼š

1. **æµè§ˆå™¨æ§åˆ¶å°**ï¼šæ²¡æœ‰é”™è¯¯
2. **ä¸‹æ‹‰æ¡†**ï¼šæ˜¾ç¤º"è¯·é€‰æ‹©æ‚¨çš„å¤§å­¦"ï¼Œå¹¶æœ‰å¤§å­¦åˆ—è¡¨
3. **APIæµ‹è¯•**ï¼š`curl http://localhost:8000/templates/presets` è¿”å›å¤§å­¦åˆ—è¡¨

---

**ç°åœ¨æ‰§è¡Œ**ï¼šå…ˆæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œç„¶åæ›´æ–°ä»£ç å¹¶é‡å¯æœåŠ¡ï¼ğŸš€



